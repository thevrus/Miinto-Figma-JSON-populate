!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}({5:function(e,t,n){"use strict";function o(){const e=new Date;return`${e.getHours()}:${e.getMinutes()}`}n.r(t);var r=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{f(o.next(e))}catch(e){i(e)}}function c(e){try{f(o.throw(e))}catch(e){i(e)}}function f(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}f((o=o.apply(e,t||[])).next())}))};figma.showUI(__html__,{width:300,height:336}),figma.ui.onmessage=e=>r(void 0,void 0,void 0,(function*(){console.log(e);const t=figma.currentPage.selection.length;if("populate"===e.type&&e.response.products.list.length>0){let i=e.response.products.list,a=e.images;function n(e,t){const o=e.type;if("GROUP"===o||"FRAME"===o)for(const o of e.children)n(o,t);else"TEXT"===o&&0===e.name.indexOf("$")?function(e,t){r(this,void 0,void 0,(function*(){let n=e.name.replace("$","");yield figma.loadFontAsync(e.fontName),e.characters=String(i[t][n])}))}(e,t):"RECTANGLE"===o&&0===e.name.indexOf("$")&&function(e,t){let n=a[t],o=figma.createImage(new Uint8Array(n)).hash,r=e.fills.scaleMode||"FIT";e.fills=[{type:"IMAGE",scaleMode:r,imageHash:o}]}(e,t)}if(t>0){a.length=t,i.length=t,i=i.map(e=>({title:e.title,brand:e.brand,discount_percent:e.discount_percent,price:e.price.price,price_before:e.price.price_before,url:e.url,id:e.id,meta_id:e.meta_id,photo_url:e.photo_url,date:new Date(Math.random()).toISOString().substr(0,10).replace(/-/g,"."),time:o(),order_id:Math.floor(9999*Math.random())+9999,gtin_12:Math.floor(1e9*Math.random())+99999999999}));let e=0;for(const t of figma.currentPage.selection){for(const o of t.children)n(o,e);e++}figma.notify(`Updated ${t} items ${function(){const e=["🤘","🙌","👌","💅","🎉","🚀"];return e[e.length*Math.random()|0]}()}`),figma.ui.postMessage("toggleSpinner")}else figma.notify("Select at least one Frame or Group 👆"),figma.ui.postMessage("toggleSpinner")}else"renameLayer"===e.type?t>0?figma.currentPage.selection.forEach(t=>{t.name=e.value,figma.notify(`Changed name to: ${e.value} 🖍`)}):figma.notify("Select a layer to rename 👆"):(figma.notify("Something went wrong, sorry 😒"),figma.ui.postMessage("toggleSpinner"))}))}});